var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
class GameConfig {
    constructor() { }
    static init() {
        var reg = Laya.ClassUtils.regClass;
    }
}
GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedauto";
GameConfig.screenMode = "vertical";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const GameConfig_1 = require("./GameConfig");
// import YKs = require("YK");
require("./YKFarmework/ResMgr/ResMgr");
require("./YKFarmework/Net/NetMgr");
require("./YKFarmework/EventMgr/DispatchEventNode");
require("./YKFarmework/EventMgr/EventListenerMgr");
class Main {
    constructor() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    onVersionLoaded() {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    }
    onConfigLoaded() {
        fairygui.UIConfig.packageFileExtension = "bin";
        fairygui.UIConfig.bringWindowToFrontOnClick = false;
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
        this.initGame();
    }
    initGame() {
        fairygui.UIConfig.globalModalWaiting = "ui://Loading/waitWind";
        YK.NetMgr.Instance.AddProto("netpack", netpack.ProtocolDef.ProtocolNames);
        YK.ModeMgr.Instance.AddMode(RoleMode);
        YK.ModeMgr.Instance.InitData();
        YK.SceneMgr.Instance.GoToScene(LoadingScene);
    }
}
//激活启动类
new Main();
},{"./GameConfig":1,"./YKFarmework/EventMgr/DispatchEventNode":3,"./YKFarmework/EventMgr/EventListenerMgr":4,"./YKFarmework/Net/NetMgr":5,"./YKFarmework/ResMgr/ResMgr":6}],3:[function(require,module,exports){
var YK;
(function (YK) {
    class DispatchEventNode {
        constructor() {
            this.eventDataPools = new Array();
            this.eventDic = {};
        }
        createEventData(cmd, data) {
            let ev;
            if (this.eventDataPools.length > 0) {
                ev = this.eventDataPools.pop();
                ev.cmd = cmd;
                ev.data = data;
                ev.isSotp = false;
            }
            else {
                ev = new EventData(cmd, data);
            }
            return ev;
        }
        returnEventData(ev) {
            ev.data = null;
            ev.cmd = null;
            ev.isSotp = false;
            this.eventDataPools.push(ev);
        }
        /**
         * 添加一个消息监听器
         * @param type 消息类型
         * @param callBack 回调函数
         * @param target 作用对象
         * @param priority 消息的优先级
         * @param once 是否只监听一次
         */
        addEventListener(type, callBack, target, priority = 0, once = false) {
            type = type.toString();
            let info = {
                callBack: callBack,
                target: target,
                priority: priority,
                once: once
            };
            let array = this.eventDic[type];
            let has = false;
            let pos = 0;
            if (array != null) {
                array.forEach(element => {
                    if (element.target == target && element.callBack == callBack) {
                        has = true;
                    }
                    if (element.priority > info.priority) {
                        pos++;
                    }
                });
            }
            else {
                array = new Array();
                this.eventDic[type] = array;
            }
            if (has) {
                console.error("重复注册消息：type=" + type);
            }
            else {
                array.splice(pos, 0, info);
            }
        }
        /**
         * 移除一个消息监听器
         * @param type 消息id
         * @param callBack 回调函数
         * @param target 作用的对象
         */
        removeEventListener(type, callBack, target) {
            type = type.toString();
            let info = null;
            let array = this.eventDic[type];
            if (array != null) {
                let infoIndex = -1;
                array.every((value, index, array) => {
                    if (value.target == target && value.callBack == callBack) {
                        infoIndex = index;
                        info = value;
                        return false;
                    }
                    return true;
                });
                if (infoIndex != -1) {
                    array.splice(infoIndex, 1);
                }
            }
        }
        /**
         * 是否存在这个监听消息
         * @param type 消息类型
         * @param callBack 回调类型
         * @param target 回调对象
         */
        hasEventListener(type, callBack, target) {
            let flag = false;
            let array = this.eventDic[type];
            if (array) {
                let index = array.findIndex((obj, index, any) => {
                    return obj.target == target && obj.callBack == callBack;
                });
                flag = index != -1;
            }
            return flag;
        }
        /**
         * 派发消息
         * @param ev 派发的消息内容
         */
        DispatchEvent(ev) {
            this._DispatchEvent(ev);
        }
        /**
         * 派发消息
         * @param type 消息id
         * @param data 消息内容
         */
        DispatchEventByType(type, data = null) {
            let ev = this.createEventData(type, data);
            this._DispatchEvent(ev);
            if (ev != null) {
                this.returnEventData(ev);
            }
        }
        _DispatchEvent(ev) {
            let array = this.eventDic[ev.cmd];
            if (array != null) {
                for (let i = 0; i < array.length; i++) {
                    let info = array[i];
                    if (info.callBack != null) {
                        info.callBack.call(info.target, ev);
                    }
                    if (info.once) {
                        array.splice(i--, 1);
                    }
                    if (ev.isSotp) {
                        break;
                    }
                }
            }
        }
    }
    YK.DispatchEventNode = DispatchEventNode;
    class EventData {
        constructor(cmd, obj) {
            this.isSotp = false;
            this.cmd = cmd;
            this.data = obj;
            this.isSotp = false;
        }
        /**
         * Stop
         */
        Stop() {
            this.isSotp = true;
        }
    }
    YK.EventData = EventData;
    class Func {
        constructor(thisObj, callBack) {
            this.mThisObj = thisObj;
            this.mCallBack = callBack;
        }
        Invoke(...args) {
            this.mCallBack.call(this.mThisObj, ...args);
        }
    }
    YK.Func = Func;
})(YK || (YK = {}));
},{}],4:[function(require,module,exports){
var YK;
(function (YK) {
    class EventListenerMgr {
        constructor(dis = null) {
            this.mOwner = null;
            this.mListener = new Array();
            this.mOwner = dis;
        }
        /**
         *
         * @param callback 回调
         * @param thisObj 作用对象
         * @param type 消息类型
         * @param _priority 优先级
         * @param _dispatchOnce 是否只派发一次
         */
        addListener(type, callback, thisObj, _priority = 0, _dispatchOnce = false) {
            if (this.mOwner.hasEventListener(type, callback, thisObj)) {
                console.warn("重复注册消息 消息id" + type);
            }
            else {
                let listener = EventListenerData.CreateEventListenerData(this.mOwner, callback, thisObj, type.toString(), _priority, _dispatchOnce);
                listener.AttachListener();
                this.mListener.push(listener);
            }
        }
        /**
         *
         * @param callback 回调
         * @param thisObj 作用对象
         * @param type 消息类型
         */
        removeListener(callback, thisObj, type) {
            if (this.mOwner.hasEventListener(type, callback, thisObj)) {
                let listener = null;
                let index = this.mListener.findIndex((value, index, array) => {
                    if (value.thisObj == thisObj && value.callback == callback) {
                        listener = value;
                        return true;
                    }
                    return false;
                });
                if (index != -1) {
                    listener.DetachListener();
                    this.mListener.splice(index, 1);
                }
            }
        }
        removeAllListener() {
            this.mListener.forEach(listener => {
                listener.DetachListener();
            });
            this.mListener.splice(0, this.mListener.length);
        }
    }
    YK.EventListenerMgr = EventListenerMgr;
    class InterchangeableEventListenerMgr {
        constructor(thisObj, defCallback = null) {
            this.otherEvents = new Array();
            this.networkEvnets = new EventListenerMgr(YK.NetMgr.Instance);
            this.sceneEvents = new EventListenerMgr(YK.SceneMgr.Instance);
            this.uiEvents = new EventListenerMgr(YK.UIMgr.Instance);
            this.modeEvents = new EventListenerMgr(YK.ModeMgr.Instance);
            this.mDefObj = thisObj;
            this.otherEvents = new Array();
            this.mDefCallback = new EventListenerData(YK.NetMgr.Instance, defCallback, thisObj, null);
            this.mNetCallback = new EventListenerData(YK.NetMgr.Instance, defCallback, thisObj, null);
            this.mModeCallback = new EventListenerData(YK.NetMgr.Instance, defCallback, thisObj, null);
            this.mSceneCallback = new EventListenerData(YK.NetMgr.Instance, defCallback, thisObj, null);
            this.mUICallback = new EventListenerData(YK.NetMgr.Instance, defCallback, thisObj, null);
        }
        setDegCallback(callback, priority = 0) {
            this.mDefCallback.callback = callback;
            this.mDefCallback.priority = priority;
            return this;
        }
        setNetCallback(callback, priority = 0) {
            this.mNetCallback.callback = callback;
            this.mNetCallback.priority = priority;
            return this;
        }
        setModeCallback(callback, priority = 0) {
            this.mModeCallback.callback = callback;
            this.mModeCallback.priority = priority;
            return this;
        }
        setSceneCallback(callback, priority = 0) {
            this.mSceneCallback.callback = callback;
            this.mSceneCallback.priority = priority;
            return this;
        }
        setUICallback(callback, priority = 0) {
            this.mUICallback.callback = callback;
            this.mSceneCallback.priority = priority;
            return this;
        }
        addListener(dis, type, callback = null, thisObj = null, _priority = 0, _dispatchOnce = false) {
            if (dis == YK.NetMgr.Instance)
                this.addNetEvent(type, callback, thisObj);
            else if (dis == YK.SceneMgr.Instance)
                this.addSceneEvent(type, callback, thisObj);
            else if (dis == YK.UIMgr.Instance)
                this.addUIEvent(type, callback, thisObj);
            else if (dis == YK.ModeMgr.Instance)
                this.addModeEvent(type, callback, thisObj);
            else {
                if (callback == null)
                    callback = this.mDefCallback.callback;
                if (thisObj == null)
                    thisObj = this.mDefCallback.thisObj;
                if (_priority == 0)
                    _priority = this.mDefCallback.priority;
                let x = this.otherEvents.findIndex((value, index, obj) => {
                    if (value.dis == dis && type == value.type
                        && callback != value.callback
                        && thisObj == value.thisObj) {
                        x = index;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
                if (x != -1) {
                    let data = EventListenerData.CreateEventListenerData(dis, callback, this, type.toString(), _priority, _dispatchOnce);
                    data.AttachListener();
                    this.otherEvents.push(data);
                }
            }
        }
        removeListener(dis, type, callback = null, thisObj = null) {
            if (dis == YK.NetMgr.Instance)
                this.removeNetEvent(type, callback, thisObj);
            else if (dis == YK.SceneMgr.Instance)
                this.removeSceneEvent(type, callback, thisObj);
            else if (dis == YK.UIMgr.Instance)
                this.removeUIEvent(type, callback, thisObj);
            else if (dis == YK.ModeMgr.Instance)
                this.removeModeEvent(type, callback, thisObj);
            else {
                if (callback == null)
                    callback = this.mDefCallback.callback;
                if (thisObj == null)
                    thisObj = this.mDefCallback.callback;
                let x = this.otherEvents.findIndex((value, index, obj) => {
                    if (value.dis == dis && type == value.type
                        && callback != value.callback
                        && thisObj == value.thisObj) {
                        x = index;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
                if (x != -1) {
                    this.otherEvents[x].DetachListener();
                    this.otherEvents.splice(x, 1);
                }
            }
        }
        addNetEvent(type, callback = null, thisObj = null, _priority = 0, _dispatchOnce = false) {
            if (callback == null) {
                callback = this.mNetCallback.callback;
                thisObj = this.mNetCallback.thisObj;
            }
            if (_priority == 0) {
                _priority = this.mNetCallback.priority;
            }
            this.networkEvnets.addListener(type, callback, thisObj, _priority, _dispatchOnce);
        }
        removeNetEvent(type, callback = null, thisObj = null) {
            if (callback == null) {
                callback = this.mNetCallback.callback;
                thisObj = this.mDefCallback.thisObj;
            }
            this.networkEvnets.removeListener(callback, thisObj, type);
        }
        addUIEvent(type, callback = null, thisObj = null, _priority = 0, _dispatchOnce = false) {
            if (callback == null) {
                callback = this.mUICallback.callback;
                thisObj = this.mUICallback.thisObj;
            }
            if (_priority == 0) {
                _priority = this.mUICallback.priority;
            }
            this.uiEvents.addListener(type, callback, thisObj, _priority, _dispatchOnce);
        }
        removeUIEvent(type, callback = null, thisObj = null) {
            if (callback == null) {
                callback = this.mUICallback.callback;
                thisObj = this.mUICallback.thisObj;
            }
            this.uiEvents.removeListener(callback, thisObj, type);
        }
        addSceneEvent(type, callback = null, thisObj = null, _priority = 0, _dispatchOnce = false) {
            if (callback == null) {
                callback = this.mSceneCallback.callback;
                thisObj = this.mSceneCallback.thisObj;
            }
            if (_priority == 0) {
                _priority = this.mUICallback.priority;
            }
            this.sceneEvents.addListener(type, callback, thisObj, _priority, _dispatchOnce);
        }
        removeSceneEvent(type, callback = null, thisObj = null) {
            if (callback == null) {
                callback = this.mSceneCallback.callback;
                thisObj = this.mSceneCallback.thisObj;
            }
            this.sceneEvents.removeListener(callback, thisObj, type);
        }
        addModeEvent(type, callback = null, thisObj = null, _priority = 0, _dispatchOnce = false) {
            if (callback == null) {
                callback = this.mModeCallback.callback;
                thisObj = this.mModeCallback.thisObj;
            }
            this.modeEvents.addListener(type, callback, thisObj);
        }
        removeModeEvent(type, callback = null, thisObj = null) {
            if (callback == null) {
                callback = this.mModeCallback.callback;
                thisObj = this.mModeCallback.thisObj;
            }
            this.modeEvents.removeListener(callback, thisObj, type);
        }
        RemoveAll() {
            if (this.networkEvnets != null)
                this.networkEvnets.removeAllListener();
            if (this.sceneEvents != null)
                this.sceneEvents.removeAllListener();
            if (this.uiEvents != null)
                this.uiEvents.removeAllListener();
            if (this.modeEvents != null)
                this.modeEvents.removeAllListener();
            this.otherEvents.forEach(element => {
                element.DetachListener();
            });
            this.otherEvents.splice(0, this.otherEvents.length);
        }
    }
    YK.InterchangeableEventListenerMgr = InterchangeableEventListenerMgr;
    class EventListenerData {
        constructor(dis, callback, thisObj, type, _priority = 0, _dispatchOnce = false) {
            this.dispatchOnce = false;
            this.dis = dis;
            this.thisObj = thisObj;
            this.type = type;
            this.callback = callback;
            this.priority = _priority;
            this.dispatchOnce = _dispatchOnce;
            // this.AttachListener()
        }
        static CreateEventListenerData(dis, callback, thisObj, type, _priority = 0, _dispatchOnce = false) {
            let listener = null;
            if (this.mEventListenerData.length > 0) {
                listener = this.mEventListenerData.pop();
                listener.dis = dis;
                listener.callback = callback;
                listener.thisObj = thisObj;
                listener.type = type;
                listener;
            }
            else {
                listener = new EventListenerData(dis, callback, thisObj, type, _priority, _dispatchOnce);
            }
            return listener;
        }
        static ReturnEventListenerData(listener) {
            if (listener) {
                listener.dis.removeEventListener(listener.type, listener.callback, listener.thisObj);
                listener.dis = null;
                listener.callback = null;
                listener.thisObj = null;
                listener.type = null;
                this.mEventListenerData.push(listener);
            }
        }
        AttachListener() {
            if (this.dis.hasEventListener(this.type, this.callback, this.thisObj)) {
                this.DetachListener();
                return false;
            }
            this.dis.addEventListener(this.type, this.callback, this.thisObj, this.priority, this.dispatchOnce);
            return true;
        }
        DetachListener() {
            EventListenerData.ReturnEventListenerData(this);
        }
    }
    EventListenerData.mEventListenerData = new Array();
    YK.EventListenerData = EventListenerData;
})(YK || (YK = {}));
},{}],5:[function(require,module,exports){
var YK;
(function (YK) {
    class NetMgr extends YK.DispatchEventNode {
        /**
         *
         */
        constructor() {
            super();
            this.httpUrl = "http://39.107.84.87:9100/?";
            this.mTimeout = 10; //默认十秒
            this.mHeartTimeout = 10;
            this.ip = 'ws://39.107.84.87:9023';
            this.socket = null;
            this.mMsgId = 0;
            this.mSendQueue = new Array();
            if (NetMgr.mInstance == null)
                NetMgr.mInstance = this;
            YK.TimeDelay.Instance.Add(1, 0, this.CheckSendTimeOut, this);
            this.socket = new Laya.Socket(null, null, Laya.Byte);
            this.socket.on(Laya.Event.OPEN, this, this.onopen);
            this.socket.on(Laya.Event.CLOSE, this, this.onclose);
            this.socket.on(Laya.Event.MESSAGE, this, this.onmessage);
            this.socket.on(Laya.Event.ERROR, this, this.onerror);
        }
        static get Instance() {
            if (this.mInstance == null)
                new NetMgr();
            return this.mInstance;
        }
        onDestroy() {
            YK.TimeDelay.Instance.Remove(this.CheckSendTimeOut, this);
        }
        CheckSendTimeOut() {
            if (this.mSendQueue.length > 0) {
                let array = new Array();
                this.mSendQueue.forEach(element => {
                    if (Date.now() - element.sendTime > this.mTimeout * 1000) {
                        array.push(element);
                    }
                });
                array.forEach(element => {
                    let index = this.mSendQueue.indexOf(element);
                    if (index != -1) {
                        this.mSendQueue.splice(index, 1);
                    }
                    this.msgTimeOut(element.head);
                });
            }
        }
        AddProto(pbName, protoNames) {
            let roots = protobuf.roots["default"][pbName];
            for (let key in protoNames) {
                let protoName = protoNames[key];
                let _class = roots[protoName];
                YK.ProtoMap.Add(protoName, _class);
            }
        }
        connect(wsurl = null) {
            wsurl = wsurl == null ? this.ip : wsurl;
            if (this.socket.connected) {
                this.onopen(null);
            }
            else {
                this.socket.connectByUrl(wsurl);
            }
        }
        onopen(ev) {
            console.log("链接服务器成功");
            YK.TimeDelay.Instance.Remove(this.sendHeartbeat, this);
            YK.TimeDelay.Instance.Remove(this.checkHeartbeat, this);
            YK.TimeDelay.Instance.Add(3, 0, this.sendHeartbeat, this);
            YK.TimeDelay.Instance.Add(3, 0, this.checkHeartbeat, this);
            this.lastActivityTime = Date.now();
            this.DispatchEventByType(NetMgrEventDef.onopen);
        }
        isConnect() {
            return this.socket != null && this.socket.connected;
        }
        disConnect(msgType, msg) {
            if (this.mSendQueue) {
                this.mSendQueue.splice(0, this.mSendQueue.length);
            }
            if (this.isConnect()) {
                this.socket.close();
                this.socket.cleanSocket();
            }
            YK.TimeDelay.Instance.Remove(this.sendHeartbeat, this);
            YK.TimeDelay.Instance.Remove(this.checkHeartbeat, this);
            let data = { type: msgType, msg: msg };
            this.DispatchEventByType(NetMgrEventDef.disConnect, data);
        }
        onerror(ev) {
            console.log("与服务器连接失败");
            this.disConnect(NetMgrEventDef.onerror, "与服务器连接失败");
        }
        onclose(ev) {
            console.log("与服务器连接断开");
            this.disConnect(NetMgrEventDef.onclose, "与服务器连接断开");
        }
        onmessage(data) {
            let head;
            //try 
            {
                head = YK.ProtoMap.UnPackHead(data);
                if (head != null) {
                    this.lastActivityTime = Date.now();
                    if (head.cmd != 1) {
                        this.distributeMsg(head);
                    }
                    else {
                        //console.log("收到心跳包")
                    }
                }
                else {
                    console.error("协议解析失败");
                }
            } //catch (error) 
            // {
            //     console.error("协议解析失败")
            //     this.disConnect("onerror","解析消息失败")
            // }
        }
        get Msgid() {
            return this.mMsgId++;
        }
        sendHeartbeat() {
            if (this.isConnect()) {
                //console.log("发送一次心跳" + Date.now())
                this.Send(1);
            }
        }
        checkHeartbeat() {
            if (Date.now() - this.lastActivityTime > 10 * 1000) {
                this.disConnect(NetMgrEventDef.HeartbeatTimeOut, "与服务器连接超时");
            }
        }
        msgTimeOut(head) {
            if (head.cmd == 1) {
                this.disConnect(NetMgrEventDef.HeartbeatTimeOut, "与服务器连接超时");
            }
            else {
                let ev = new YK.ResponseMessageEvent(head.cmd.toString());
                head.errorcode = -1;
                ev.SetData(head, null);
                console.error("消息返回超时id=" + head.cmd);
                this.DispatchEvent(ev);
            }
        }
        SendGet(url, callback) {
            url = this.httpUrl + url;
            console.log(url);
            let flag = false;
            let request = new laya.net.HttpRequest();
            request.once(laya.events.Event.COMPLETE, this, (e) => {
                let respone = request.data;
                let data = null;
                if (respone != null) {
                    data = JSON.parse(respone);
                }
                callback.Invoke(data);
            });
            request.once(laya.events.Event.ERROR, this, (e) => {
                callback.Invoke(null);
            });
            request.send(url, null, "get");
        }
        Send(id, data = null) {
            let head = new YK.PackBase();
            head.cmd = id;
            head.errorcode = 0;
            head.msgid = this.Msgid;
            let sendData = {
                head: head,
                sendTime: Date.now()
            };
            if (this.isConnect()) {
                let buffer = YK.ProtoMap.Pack(head, data);
                if (id != 1) {
                    console.log("发送消息给服务器》");
                    console.log(head);
                    console.log(data);
                    this.mSendQueue.push(sendData);
                }
                this.socket.send(buffer);
            }
            else {
                console.error("网络断开无法发送消息");
            }
        }
        distributeMsg(head) {
            let msg = YK.ProtoMap.UnPack(head);
            console.log("收到服务返回的消息信息头：");
            console.log(head);
            if (head.errorcode != null && head.errorcode != 0) {
                console.warn("服务器返回错误码  消息id：" + head.cmd + "/errorcode=" + head.errorcode);
            }
            if (head == null || head.cmd == null) {
                console.warn("服务器返回无效的cmdid");
            }
            else {
                let index = this.mSendQueue.findIndex((obj, index, any) => {
                    return obj.head.msgid == head.msgid && obj.head.cmd == head.cmd;
                });
                if (index != -1) {
                    this.mSendQueue.splice(index, 1);
                }
                let ev = new YK.ResponseMessageEvent(head.cmd.toString());
                ev.SetData(head, msg);
                this.DispatchEvent(ev);
            }
        }
    }
    YK.NetMgr = NetMgr;
    class NetMgrEventDef {
    }
    NetMgrEventDef.disConnect = "disConnect";
    NetMgrEventDef.onerror = "onerror";
    NetMgrEventDef.onclose = "onclose";
    NetMgrEventDef.onopen = "onopen";
    NetMgrEventDef.HeartbeatTimeOut = "HeartbeatTimeOut";
    YK.NetMgrEventDef = NetMgrEventDef;
})(YK || (YK = {}));
},{}],6:[function(require,module,exports){
var YK;
(function (YK) {
    var Handler = Laya.Handler;
    class ResInfo {
        constructor() {
            this.isKeepMemory = false;
            this.isFGUIPack = false;
        }
        get fullUrl() {
            if (this.isFGUIPack) {
                return this.url.replace("." + fairygui.UIConfig.packageFileExtension, "");
            }
            return this.url;
        }
    }
    class LoadGruopInfo {
        constructor() {
            this.Progress = 0;
            this.needLoad = new Array();
        }
        add(url, type, isKeepMemory = false, isFGUIPack = false) {
            let index = this.needLoad.findIndex((value, index, obj) => {
                return value.url == url;
            });
            if (index == -1) {
                let info = new ResInfo();
                info.isKeepMemory = isKeepMemory;
                info.url = url;
                info.type = type;
                info.isFGUIPack = isFGUIPack;
                this.needLoad.push(info);
            }
            return this;
        }
        onCompletion(callback, thisObjs) {
            this.finish = new YK.Func(thisObjs, callback);
            return this;
        }
        onItemCompletion(callback, thisObjs) {
            this.loadItem = new YK.Func(thisObjs, callback);
            return this;
        }
        start() {
            ResMgr.Instance.LoadGroup(this);
        }
    }
    YK.LoadGruopInfo = LoadGruopInfo;
    class ResMgr extends YK.DispatchEventNode {
        constructor() {
            super();
            this.mOldRes = new Array();
            this.resDic = new Map();
            if (ResMgr.mInstance == null)
                ResMgr.mInstance = this;
        }
        static get Instance() {
            if (this.mInstance == null)
                new ResMgr();
            return this.mInstance;
        }
        GetRes(url) {
            return Laya.loader.getRes(url);
        }
        LoadGroup(loads) {
            let urls = new Array();
            loads.needLoad.forEach(element => {
                urls.push({ url: element.url, type: element.type });
            });
            Laya.loader.load(urls, Handler.create(this, (success) => {
                if (success) {
                    for (let index = 0; index < loads.needLoad.length; index++) {
                        let info = loads.needLoad[index];
                        if (info.isFGUIPack) {
                            fairygui.UIPackage.addPackage(info.fullUrl);
                        }
                        if (!this.resDic.has(info.url)) {
                            this.resDic.set(info.url, info);
                        }
                    }
                    if (loads.finish != null) {
                        loads.finish.Invoke();
                    }
                }
                else {
                    console.error("加载资源失败：");
                    console.log(urls);
                }
            }), Handler.create(this, (progress) => {
                loads.Progress = progress * 100;
                if (loads.loadItem != null) {
                    loads.loadItem.Invoke();
                }
            }));
        }
        /**
         * 释放资源
         * @param forced 是否强制释放所有
         */
        pop(forced = false) {
            if (forced) {
                this.mOldRes.splice(0, this.mOldRes.length);
                this.resDic.forEach((v, key) => {
                    this.mOldRes.push(key);
                });
            }
            while (this.mOldRes.length > 0) {
                let url = this.mOldRes.pop();
                let info = this.resDic.get(url);
                if (info != null) {
                    if (info.isFGUIPack)
                        fairygui.UIPackage.removePackage(info.fullUrl);
                    this.resDic.delete(info.url);
                }
                Laya.loader.clearRes(url);
            }
            if (forced) {
                this.resDic.clear();
            }
            else {
            }
        }
        /**
         * 压入要释放的资源
         */
        push() {
            this.resDic.forEach((v, key) => {
                if (!v.isKeepMemory)
                    this.mOldRes.push(key);
            });
        }
    }
    ResMgr.mInstance = null;
    YK.ResMgr = ResMgr;
})(YK || (YK = {}));
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL0xheUJveC9MYXlhQWlySURFX2JldGEvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9ZS0Zhcm1ld29yay9FdmVudE1nci9EaXNwYXRjaEV2ZW50Tm9kZS50cyIsInNyYy9ZS0Zhcm1ld29yay9FdmVudE1nci9FdmVudExpc3RlbmVyTWdyLnRzIiwic3JjL1lLRmFybWV3b3JrL05ldC9OZXRNZ3IudHMiLCJzcmMvWUtGYXJtZXdvcmsvUmVzTWdyL1Jlc01nci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBLGdHQUFnRzs7QUFFaEc7O0VBRUU7QUFDRjtJQWFJLGdCQUFjLENBQUM7SUFDZixNQUFNLENBQUMsSUFBSTtRQUNQLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO0lBRWpELENBQUM7O0FBaEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0FBQ2pCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0FBQ25CLG9CQUFTLEdBQVEsV0FBVyxDQUFDO0FBQzdCLHFCQUFVLEdBQVEsVUFBVSxDQUFDO0FBQzdCLGlCQUFNLEdBQVEsS0FBSyxDQUFDO0FBQ3BCLGlCQUFNLEdBQVEsTUFBTSxDQUFDO0FBQ3JCLHFCQUFVLEdBQUssRUFBRSxDQUFDO0FBQ2xCLG9CQUFTLEdBQVEsRUFBRSxDQUFDO0FBQ3BCLGdCQUFLLEdBQVMsS0FBSyxDQUFDO0FBQ3BCLGVBQUksR0FBUyxLQUFLLENBQUM7QUFDbkIsdUJBQVksR0FBUyxLQUFLLENBQUM7QUFDM0IsNEJBQWlCLEdBQVMsSUFBSSxDQUFDO0FBWjFDLDZCQWtCQztBQUNELFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7OztBQ3hCbEIsNkNBQXNDO0FBQ3RD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RSxRQUFRLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7b0JBQ25FLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtpQkFDL0I7Z0JBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUE7YUFFNUI7WUFFRCxJQUFJLE1BQU0sRUFDVjtnQkFDSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO2FBQ3RCO2lCQUVEO2FBRUM7UUFDTCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxJQUFJO1lBRVAsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFVLEVBQUUsR0FBVyxFQUFFLEVBQUU7Z0JBRTVDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWTtvQkFDZixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUM5QixDQUFDLENBQUMsQ0FBQztRQUNQLENBQUM7O0lBeEdjLGdCQUFTLEdBQVcsSUFBSSxDQUFBO0lBVDlCLFNBQU0sU0FrSGxCLENBQUE7QUFDTCxDQUFDLEVBbkxNLEVBQUUsS0FBRixFQUFFLFFBbUxSIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5cclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkYXV0b1wiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwidmVydGljYWxcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIlwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblxyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuLy8gaW1wb3J0IFlLcyA9IHJlcXVpcmUoXCJZS1wiKTtcclxuaW1wb3J0IFwiLi9ZS0Zhcm1ld29yay9SZXNNZ3IvUmVzTWdyXCJcclxuaW1wb3J0IFwiLi9ZS0Zhcm1ld29yay9OZXQvTmV0TWdyXCJcclxuaW1wb3J0IFwiLi9ZS0Zhcm1ld29yay9FdmVudE1nci9EaXNwYXRjaEV2ZW50Tm9kZVwiXHJcbmltcG9ydCBcIi4vWUtGYXJtZXdvcmsvRXZlbnRNZ3IvRXZlbnRMaXN0ZW5lck1nclwiXHJcblxyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0XHJcbiAgICAgICAgZmFpcnlndWkuVUlDb25maWcucGFja2FnZUZpbGVFeHRlbnNpb24gPSBcImJpblwiXHJcbiAgICAgICAgZmFpcnlndWkuVUlDb25maWcuYnJpbmdXaW5kb3dUb0Zyb250T25DbGljayA9IGZhbHNlXHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdFx0dGhpcy5pbml0R2FtZSgpXHJcblx0fVxyXG5cdGluaXRHYW1lKClcclxuICAgIHtcclxuICAgICAgICBmYWlyeWd1aS5VSUNvbmZpZy5nbG9iYWxNb2RhbFdhaXRpbmcgPSBcInVpOi8vTG9hZGluZy93YWl0V2luZFwiXHJcblx0XHRZSy5OZXRNZ3IuSW5zdGFuY2UuQWRkUHJvdG8oXCJuZXRwYWNrXCIsIG5ldHBhY2suUHJvdG9jb2xEZWYuUHJvdG9jb2xOYW1lcylcclxuICAgICAgICBZSy5Nb2RlTWdyLkluc3RhbmNlLkFkZE1vZGU8Um9sZU1vZGU+KFJvbGVNb2RlKVxyXG4gICAgICAgIFlLLk1vZGVNZ3IuSW5zdGFuY2UuSW5pdERhdGEoKVxyXG5cdFx0WUsuU2NlbmVNZ3IuSW5zdGFuY2UuR29Ub1NjZW5lKExvYWRpbmdTY2VuZSlcclxuXHRcdFxyXG4gICAgfVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsIm1vZHVsZSBZS1xyXG57XHJcbiAgICBleHBvcnQgY2xhc3MgRGlzcGF0Y2hFdmVudE5vZGUgXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudERhdGFQb29sczogQXJyYXk8RXZlbnREYXRhPiA9IG5ldyBBcnJheTxFdmVudERhdGE+KCk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlRXZlbnREYXRhKGNtZCwgZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBldjogRXZlbnREYXRhXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50RGF0YVBvb2xzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2ID0gdGhpcy5ldmVudERhdGFQb29scy5wb3AoKVxyXG4gICAgICAgICAgICAgICAgZXYuY21kID0gY21kXHJcbiAgICAgICAgICAgICAgICBldi5kYXRhID0gZGF0YVxyXG4gICAgICAgICAgICAgICAgZXYuaXNTb3RwID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2ID0gbmV3IEV2ZW50RGF0YShjbWQsIGRhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV2XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJldHVybkV2ZW50RGF0YShldjogRXZlbnREYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZXYuZGF0YSA9IG51bGxcclxuICAgICAgICAgICAgZXYuY21kID0gbnVsbFxyXG4gICAgICAgICAgICBldi5pc1NvdHAgPSBmYWxzZVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RGF0YVBvb2xzLnB1c2goZXYpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgZXZlbnREaWM6IEV2ZW50TGlzdGVuZXJDbGFzc0RpYyA9XHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOa3u+WKoOS4gOS4qua2iOaBr+ebkeWQrOWZqFxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIOa2iOaBr+exu+Wei1xyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsQmFjayDlm57osIPlh73mlbBcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IOS9nOeUqOWvueixoVxyXG4gICAgICAgICAqIEBwYXJhbSBwcmlvcml0eSDmtojmga/nmoTkvJjlhYjnuqdcclxuICAgICAgICAgKiBAcGFyYW0gb25jZSDmmK/lkKblj6rnm5HlkKzkuIDmrKFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiBzdHJpbmcgfCBudW1iZXIsIGNhbGxCYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIsIHRhcmdldDogYW55LCBwcmlvcml0eTogbnVtYmVyID0gMCwgb25jZTogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZSA9IHR5cGUudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICBsZXQgaW5mbzogRXZlbnRMaXN0ZW5lckluZm9EYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2s6IGNhbGxCYWNrLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICBvbmNlOiBvbmNlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZXZlbnREaWNbdHlwZV1cclxuICAgICAgICAgICAgbGV0IGhhcyA9IGZhbHNlXHJcbiAgICAgICAgICAgIGxldCBwb3MgPSAwXHJcbiAgICAgICAgICAgIGlmIChhcnJheSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhcnJheS5mb3JFYWNoKGVsZW1lbnQgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50YXJnZXQgPT0gdGFyZ2V0ICYmIGVsZW1lbnQuY2FsbEJhY2sgPT0gY2FsbEJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXMgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnByaW9yaXR5ID4gaW5mby5wcmlvcml0eSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcysrXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhcnJheSA9IG5ldyBBcnJheTxFdmVudExpc3RlbmVySW5mb0RhdGE+KClcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnREaWNbdHlwZV0gPSBhcnJheVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChoYXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLph43lpI3ms6jlhozmtojmga/vvJp0eXBlPVwiICsgdHlwZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShwb3MsIDAsIGluZm8pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOenu+mZpOS4gOS4qua2iOaBr+ebkeWQrOWZqFxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIOa2iOaBr2lkXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxCYWNrIOWbnuiwg+WHveaVsFxyXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQg5L2c55So55qE5a+56LGhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZTogc3RyaW5nIHwgbnVtYmVyLCBjYWxsQmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyLCB0YXJnZXQ6IGFueSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgbGV0IGluZm86IEV2ZW50TGlzdGVuZXJJbmZvRGF0YSA9IG51bGxcclxuICAgICAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5ldmVudERpY1t0eXBlXVxyXG4gICAgICAgICAgICBpZiAoYXJyYXkgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZm9JbmRleCA9IC0xXHJcbiAgICAgICAgICAgICAgICBhcnJheS5ldmVyeSgodmFsdWU6IEV2ZW50TGlzdGVuZXJJbmZvRGF0YSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IEV2ZW50TGlzdGVuZXJJbmZvRGF0YVtdKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50YXJnZXQgPT0gdGFyZ2V0ICYmIHZhbHVlLmNhbGxCYWNrID09IGNhbGxCYWNrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb0luZGV4ID0gaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mbyA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5mb0luZGV4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShpbmZvSW5kZXgsIDEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaYr+WQpuWtmOWcqOi/meS4quebkeWQrOa2iOaBr1xyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIOa2iOaBr+exu+Wei1xyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsQmFjayDlm57osIPnsbvlnotcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IOWbnuiwg+WvueixoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBoYXNFdmVudExpc3RlbmVyKHR5cGU6IHN0cmluZyB8IG51bWJlciwgY2FsbEJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciwgdGFyZ2V0OiBhbnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlXHJcbiAgICAgICAgICAgIGxldCBhcnJheSA9IHRoaXMuZXZlbnREaWNbdHlwZV1cclxuICAgICAgICAgICAgaWYgKGFycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBhcnJheS5maW5kSW5kZXgoKG9iaiwgaW5kZXgsIGFueSkgPT4gXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50YXJnZXQgPT0gdGFyZ2V0ICYmIG9iai5jYWxsQmFjayA9PSBjYWxsQmFja1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGZsYWcgPSBpbmRleCAhPSAtMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmbGFnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmtL7lj5Hmtojmga9cclxuICAgICAgICAgKiBAcGFyYW0gZXYg5rS+5Y+R55qE5raI5oGv5YaF5a65XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIERpc3BhdGNoRXZlbnQoZXY6IEV2ZW50RGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX0Rpc3BhdGNoRXZlbnQoZXYpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmtL7lj5Hmtojmga9cclxuICAgICAgICAgKiBAcGFyYW0gdHlwZSDmtojmga9pZFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIOa2iOaBr+WGheWuuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBEaXNwYXRjaEV2ZW50QnlUeXBlKHR5cGU6IHN0cmluZyB8IG51bWJlciwgZGF0YTogYW55ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBldiA9IHRoaXMuY3JlYXRlRXZlbnREYXRhKHR5cGUsIGRhdGEpXHJcbiAgICAgICAgICAgIHRoaXMuX0Rpc3BhdGNoRXZlbnQoZXYpXHJcbiAgICAgICAgICAgIGlmIChldiAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJldHVybkV2ZW50RGF0YShldilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfRGlzcGF0Y2hFdmVudChldjogRXZlbnREYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5ldmVudERpY1tldi5jbWRdXHJcbiAgICAgICAgICAgIGlmIChhcnJheSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IGFycmF5W2ldXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uY2FsbEJhY2sgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY2FsbEJhY2suY2FsbChpbmZvLnRhcmdldCwgZXYpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLm9uY2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheS5zcGxpY2UoaS0tLCAxKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXYuaXNTb3RwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB0eXBlIEV2ZW50TGlzdGVuZXJJbmZvRGF0YSA9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYWxsQmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IGFueSxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IG51bWJlcixcclxuICAgICAgICAgICAgb25jZTogYm9vbGVhblxyXG4gICAgICAgIH1cclxuXHJcbiAgICBleHBvcnQgdHlwZSBFdmVudExpc3RlbmVyQ2xhc3NEaWMgPSB7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogQXJyYXk8RXZlbnRMaXN0ZW5lckluZm9EYXRhPlxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgdHlwZSBFdmVudENhbGxiYWNrTGlzdGVuZXIgPSAoKGV2OiBFdmVudERhdGEpID0+IHZvaWQpO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBFdmVudERhdGFcclxuICAgIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihjbWQ6IHN0cmluZywgb2JqOiBhbnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNtZCA9IGNtZFxyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBvYmpcclxuICAgICAgICAgICAgdGhpcy5pc1NvdHAgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgY21kOiBzdHJpbmdcclxuICAgICAgICBwdWJsaWMgZGF0YTogYW55XHJcbiAgICAgICAgcHVibGljIGlzU290cCA9IGZhbHNlXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3RvcFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBTdG9wKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTb3RwID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRnVuY1xyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgbVRoaXNPYmo6IGFueVxyXG4gICAgICAgIHByaXZhdGUgbUNhbGxCYWNrOiBGdW5jdGlvblxyXG5cclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodGhpc09iajogYW55LCBjYWxsQmFjazogRnVuY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1UaGlzT2JqID0gdGhpc09ialxyXG4gICAgICAgICAgICB0aGlzLm1DYWxsQmFjayA9IGNhbGxCYWNrXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSW52b2tlKC4uLmFyZ3M6IGFueVtdKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tQ2FsbEJhY2suY2FsbCh0aGlzLm1UaGlzT2JqLCAuLi5hcmdzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgWUtcclxue1xyXG4gICAgZXhwb3J0IGNsYXNzIEV2ZW50TGlzdGVuZXJNZ3JcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIG1Pd25lciA9IG51bGxcclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoZGlzOiBEaXNwYXRjaEV2ZW50Tm9kZSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1Pd25lciA9IGRpc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtTGlzdGVuZXI6IEFycmF5PEV2ZW50TGlzdGVuZXJEYXRhPiA9IG5ldyBBcnJheTxFdmVudExpc3RlbmVyRGF0YT4oKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCDXHJcbiAgICAgICAgICogQHBhcmFtIHRoaXNPYmog5L2c55So5a+56LGhXHJcbiAgICAgICAgICogQHBhcmFtIHR5cGUg5raI5oGv57G75Z6LXHJcbiAgICAgICAgICogQHBhcmFtIF9wcmlvcml0eSDkvJjlhYjnuqcgXHJcbiAgICAgICAgICogQHBhcmFtIF9kaXNwYXRjaE9uY2Ug5piv5ZCm5Y+q5rS+5Y+R5LiA5qyhIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRMaXN0ZW5lcih0eXBlOiBzdHJpbmcgfCBudW1iZXIsIGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIsIHRoaXNPYmo6IGFueSwgX3ByaW9yaXR5OiBudW1iZXIgPSAwLCBfZGlzcGF0Y2hPbmNlOiBib29sZWFuID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tT3duZXIuaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgdGhpc09iaikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIumHjeWkjeazqOWGjOa2iOaBryDmtojmga9pZFwiICsgdHlwZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBsaXN0ZW5lciA9IEV2ZW50TGlzdGVuZXJEYXRhLkNyZWF0ZUV2ZW50TGlzdGVuZXJEYXRhKHRoaXMubU93bmVyLCBjYWxsYmFjaywgdGhpc09iaiwgdHlwZS50b1N0cmluZygpLCBfcHJpb3JpdHksIF9kaXNwYXRjaE9uY2UpXHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5BdHRhY2hMaXN0ZW5lcigpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1MaXN0ZW5lci5wdXNoKGxpc3RlbmVyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCDXHJcbiAgICAgICAgICogQHBhcmFtIHRoaXNPYmog5L2c55So5a+56LGhXHJcbiAgICAgICAgICogQHBhcmFtIHR5cGUg5raI5oGv57G75Z6LXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUxpc3RlbmVyKGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIsIHRoaXNPYmo6IGFueSwgdHlwZTogc3RyaW5nIHwgbnVtYmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubU93bmVyLmhhc0V2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmopKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJEYXRhID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tTGlzdGVuZXIuZmluZEluZGV4KCh2YWx1ZSwgaW5kZXgsIGFycmF5KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50aGlzT2JqID09IHRoaXNPYmogJiYgdmFsdWUuY2FsbGJhY2sgPT0gY2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuRGV0YWNoTGlzdGVuZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubUxpc3RlbmVyLnNwbGljZShpbmRleCwgMSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVBbGxMaXN0ZW5lcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1MaXN0ZW5lci5mb3JFYWNoKGxpc3RlbmVyID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLkRldGFjaExpc3RlbmVyKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubUxpc3RlbmVyLnNwbGljZSgwLCB0aGlzLm1MaXN0ZW5lci5sZW5ndGgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgSW50ZXJjaGFuZ2VhYmxlRXZlbnRMaXN0ZW5lck1nclxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgbmV0d29ya0V2bmV0czogRXZlbnRMaXN0ZW5lck1nclxyXG4gICAgICAgIHByaXZhdGUgc2NlbmVFdmVudHM6IEV2ZW50TGlzdGVuZXJNZ3JcclxuICAgICAgICBwcml2YXRlIHVpRXZlbnRzOiBFdmVudExpc3RlbmVyTWdyXHJcbiAgICAgICAgcHJpdmF0ZSBtb2RlRXZlbnRzOiBFdmVudExpc3RlbmVyTWdyXHJcbiAgICAgICAgcHJpdmF0ZSBvdGhlckV2ZW50czogQXJyYXk8RXZlbnRMaXN0ZW5lckRhdGE+ID0gbmV3IEFycmF5PEV2ZW50TGlzdGVuZXJEYXRhPigpXHJcbiAgICAgICAgcHJpdmF0ZSBtRGVmQ2FsbGJhY2s6IEV2ZW50TGlzdGVuZXJEYXRhXHJcbiAgICAgICAgcHJpdmF0ZSBtRGVmT2JqOiBhbnlcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtTmV0Q2FsbGJhY2s6IEV2ZW50TGlzdGVuZXJEYXRhXHJcbiAgICAgICAgcHJpdmF0ZSBtTW9kZUNhbGxiYWNrOiBFdmVudExpc3RlbmVyRGF0YVxyXG4gICAgICAgIHByaXZhdGUgbVNjZW5lQ2FsbGJhY2s6IEV2ZW50TGlzdGVuZXJEYXRhXHJcbiAgICAgICAgcHJpdmF0ZSBtVUlDYWxsYmFjazogRXZlbnRMaXN0ZW5lckRhdGFcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IodGhpc09iajogYW55LCBkZWZDYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubmV0d29ya0V2bmV0cyA9IG5ldyBFdmVudExpc3RlbmVyTWdyKE5ldE1nci5JbnN0YW5jZSlcclxuICAgICAgICAgICAgdGhpcy5zY2VuZUV2ZW50cyA9IG5ldyBFdmVudExpc3RlbmVyTWdyKFNjZW5lTWdyLkluc3RhbmNlKVxyXG4gICAgICAgICAgICB0aGlzLnVpRXZlbnRzID0gbmV3IEV2ZW50TGlzdGVuZXJNZ3IoVUlNZ3IuSW5zdGFuY2UpXHJcbiAgICAgICAgICAgIHRoaXMubW9kZUV2ZW50cyA9IG5ldyBFdmVudExpc3RlbmVyTWdyKE1vZGVNZ3IuSW5zdGFuY2UpXHJcbiAgICAgICAgICAgIHRoaXMubURlZk9iaiA9IHRoaXNPYmpcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3RoZXJFdmVudHMgPSBuZXcgQXJyYXk8RXZlbnRMaXN0ZW5lckRhdGE+KClcclxuICAgICAgICAgICAgdGhpcy5tRGVmQ2FsbGJhY2sgPSBuZXcgRXZlbnRMaXN0ZW5lckRhdGEoTmV0TWdyLkluc3RhbmNlLCBkZWZDYWxsYmFjaywgdGhpc09iaiwgbnVsbClcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLm1OZXRDYWxsYmFjayA9IG5ldyBFdmVudExpc3RlbmVyRGF0YShOZXRNZ3IuSW5zdGFuY2UsIGRlZkNhbGxiYWNrLCB0aGlzT2JqLCBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLm1Nb2RlQ2FsbGJhY2sgPSBuZXcgRXZlbnRMaXN0ZW5lckRhdGEoTmV0TWdyLkluc3RhbmNlLCBkZWZDYWxsYmFjaywgdGhpc09iaiwgbnVsbClcclxuICAgICAgICAgICAgdGhpcy5tU2NlbmVDYWxsYmFjayA9IG5ldyBFdmVudExpc3RlbmVyRGF0YShOZXRNZ3IuSW5zdGFuY2UsIGRlZkNhbGxiYWNrLCB0aGlzT2JqLCBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLm1VSUNhbGxiYWNrID0gbmV3IEV2ZW50TGlzdGVuZXJEYXRhKE5ldE1nci5JbnN0YW5jZSwgZGVmQ2FsbGJhY2ssIHRoaXNPYmosIG51bGwpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0RGVnQ2FsbGJhY2soY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciwgcHJpb3JpdHkgPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tRGVmQ2FsbGJhY2suY2FsbGJhY2sgPSBjYWxsYmFja1xyXG4gICAgICAgICAgICB0aGlzLm1EZWZDYWxsYmFjay5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0TmV0Q2FsbGJhY2soY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciwgcHJpb3JpdHkgPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tTmV0Q2FsbGJhY2suY2FsbGJhY2sgPSBjYWxsYmFja1xyXG4gICAgICAgICAgICB0aGlzLm1OZXRDYWxsYmFjay5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0TW9kZUNhbGxiYWNrKGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIsIHByaW9yaXR5ID0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubU1vZGVDYWxsYmFjay5jYWxsYmFjayA9IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIHRoaXMubU1vZGVDYWxsYmFjay5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0U2NlbmVDYWxsYmFjayhjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyLCBwcmlvcml0eSA9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1TY2VuZUNhbGxiYWNrLmNhbGxiYWNrID0gY2FsbGJhY2tcclxuICAgICAgICAgICAgdGhpcy5tU2NlbmVDYWxsYmFjay5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0VUlDYWxsYmFjayhjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyLCBwcmlvcml0eSA9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1VSUNhbGxiYWNrLmNhbGxiYWNrID0gY2FsbGJhY2tcclxuICAgICAgICAgICAgdGhpcy5tU2NlbmVDYWxsYmFjay5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGFkZExpc3RlbmVyKGRpczogRGlzcGF0Y2hFdmVudE5vZGUsIHR5cGU6IHN0cmluZyB8IG51bWJlclxyXG4gICAgICAgICAgICAsIGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIgPSBudWxsLCB0aGlzT2JqOiBhbnkgPSBudWxsLCBfcHJpb3JpdHk6IG51bWJlciA9IDAsIF9kaXNwYXRjaE9uY2U6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkaXMgPT0gTmV0TWdyLkluc3RhbmNlKSB0aGlzLmFkZE5ldEV2ZW50KHR5cGUsIGNhbGxiYWNrLCB0aGlzT2JqKVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkaXMgPT0gU2NlbmVNZ3IuSW5zdGFuY2UpIHRoaXMuYWRkU2NlbmVFdmVudCh0eXBlLCBjYWxsYmFjaywgdGhpc09iailcclxuICAgICAgICAgICAgZWxzZSBpZiAoZGlzID09IFVJTWdyLkluc3RhbmNlKSB0aGlzLmFkZFVJRXZlbnQodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmopXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcyA9PSBNb2RlTWdyLkluc3RhbmNlKSB0aGlzLmFkZE1vZGVFdmVudCh0eXBlLCBjYWxsYmFjaywgdGhpc09iailcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwpIGNhbGxiYWNrID0gdGhpcy5tRGVmQ2FsbGJhY2suY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzT2JqID09IG51bGwpIHRoaXNPYmogPSB0aGlzLm1EZWZDYWxsYmFjay50aGlzT2JqXHJcbiAgICAgICAgICAgICAgICBpZiAoX3ByaW9yaXR5ID09IDApIF9wcmlvcml0eSA9IHRoaXMubURlZkNhbGxiYWNrLnByaW9yaXR5XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHggPSB0aGlzLm90aGVyRXZlbnRzLmZpbmRJbmRleCgodmFsdWU6IEV2ZW50TGlzdGVuZXJEYXRhLCBpbmRleDogbnVtYmVyLCBvYmo6IEFycmF5PEV2ZW50TGlzdGVuZXJEYXRhPikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuZGlzID09IGRpcyAmJiB0eXBlID09IHZhbHVlLnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgY2FsbGJhY2sgIT0gdmFsdWUuY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpc09iaiA9PSB2YWx1ZS50aGlzT2JqKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBFdmVudExpc3RlbmVyRGF0YS5DcmVhdGVFdmVudExpc3RlbmVyRGF0YShkaXMsIGNhbGxiYWNrLCB0aGlzLCB0eXBlLnRvU3RyaW5nKCksIF9wcmlvcml0eSwgX2Rpc3BhdGNoT25jZSlcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLkF0dGFjaExpc3RlbmVyKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm90aGVyRXZlbnRzLnB1c2goZGF0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUxpc3RlbmVyKGRpczogRGlzcGF0Y2hFdmVudE5vZGUsIHR5cGU6IHN0cmluZyB8IG51bWJlclxyXG4gICAgICAgICAgICAsIGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIgPSBudWxsLCB0aGlzT2JqOiBhbnkgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRpcyA9PSBOZXRNZ3IuSW5zdGFuY2UpIHRoaXMucmVtb3ZlTmV0RXZlbnQodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmopXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcyA9PSBTY2VuZU1nci5JbnN0YW5jZSkgdGhpcy5yZW1vdmVTY2VuZUV2ZW50KHR5cGUsIGNhbGxiYWNrLCB0aGlzT2JqKVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkaXMgPT0gVUlNZ3IuSW5zdGFuY2UpIHRoaXMucmVtb3ZlVUlFdmVudCh0eXBlLCBjYWxsYmFjaywgdGhpc09iailcclxuICAgICAgICAgICAgZWxzZSBpZiAoZGlzID09IE1vZGVNZ3IuSW5zdGFuY2UpIHRoaXMucmVtb3ZlTW9kZUV2ZW50KHR5cGUsIGNhbGxiYWNrLCB0aGlzT2JqKVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKSBjYWxsYmFjayA9IHRoaXMubURlZkNhbGxiYWNrLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc09iaiA9PSBudWxsKSB0aGlzT2JqID0gdGhpcy5tRGVmQ2FsbGJhY2suY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5vdGhlckV2ZW50cy5maW5kSW5kZXgoKHZhbHVlOiBFdmVudExpc3RlbmVyRGF0YSwgaW5kZXg6IG51bWJlciwgb2JqOiBBcnJheTxFdmVudExpc3RlbmVyRGF0YT4pID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmRpcyA9PSBkaXMgJiYgdHlwZSA9PSB2YWx1ZS50eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGNhbGxiYWNrICE9IHZhbHVlLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXNPYmogPT0gdmFsdWUudGhpc09iailcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXJFdmVudHNbeF0uRGV0YWNoTGlzdGVuZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXJFdmVudHMuc3BsaWNlKHgsIDEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGROZXRFdmVudCh0eXBlOiBzdHJpbmcgfCBudW1iZXIsIGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIgPSBudWxsLCB0aGlzT2JqOiBhbnkgPSBudWxsLFxyXG4gICAgICAgICAgICBfcHJpb3JpdHk6IG51bWJlciA9IDAsIF9kaXNwYXRjaE9uY2U6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHRoaXMubU5ldENhbGxiYWNrLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzT2JqID0gdGhpcy5tTmV0Q2FsbGJhY2sudGhpc09ialxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfcHJpb3JpdHkgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ByaW9yaXR5ID0gdGhpcy5tTmV0Q2FsbGJhY2sucHJpb3JpdHlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtFdm5ldHMuYWRkTGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmosIF9wcmlvcml0eSwgX2Rpc3BhdGNoT25jZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVOZXRFdmVudCh0eXBlOiBzdHJpbmcgfCBudW1iZXJcclxuICAgICAgICAgICAgLCBjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyID0gbnVsbCwgdGhpc09iajogYW55ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHRoaXMubU5ldENhbGxiYWNrLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzT2JqID0gdGhpcy5tRGVmQ2FsbGJhY2sudGhpc09ialxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubmV0d29ya0V2bmV0cy5yZW1vdmVMaXN0ZW5lcihjYWxsYmFjaywgdGhpc09iaiwgdHlwZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRVSUV2ZW50KHR5cGU6IHN0cmluZyB8IG51bWJlciwgY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciA9IG51bGwsIHRoaXNPYmo6IGFueSA9IG51bGwsIF9wcmlvcml0eTogbnVtYmVyID0gMCwgX2Rpc3BhdGNoT25jZTogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdGhpcy5tVUlDYWxsYmFjay5jYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgdGhpc09iaiA9IHRoaXMubVVJQ2FsbGJhY2sudGhpc09ialxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfcHJpb3JpdHkgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ByaW9yaXR5ID0gdGhpcy5tVUlDYWxsYmFjay5wcmlvcml0eVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudWlFdmVudHMuYWRkTGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmosIF9wcmlvcml0eSwgX2Rpc3BhdGNoT25jZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVVSUV2ZW50KHR5cGU6IHN0cmluZyB8IG51bWJlciwgY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciA9IG51bGwsIHRoaXNPYmo6IGFueSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB0aGlzLm1VSUNhbGxiYWNrLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzT2JqID0gdGhpcy5tVUlDYWxsYmFjay50aGlzT2JqXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51aUV2ZW50cy5yZW1vdmVMaXN0ZW5lcihjYWxsYmFjaywgdGhpc09iaiwgdHlwZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRTY2VuZUV2ZW50KHR5cGU6IHN0cmluZyB8IG51bWJlciwgY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciA9IG51bGwsIHRoaXNPYmo6IGFueSA9IG51bGwsIF9wcmlvcml0eTogbnVtYmVyID0gMCwgX2Rpc3BhdGNoT25jZTogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdGhpcy5tU2NlbmVDYWxsYmFjay5jYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgdGhpc09iaiA9IHRoaXMubVNjZW5lQ2FsbGJhY2sudGhpc09ialxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfcHJpb3JpdHkgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ByaW9yaXR5ID0gdGhpcy5tVUlDYWxsYmFjay5wcmlvcml0eVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVFdmVudHMuYWRkTGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIHRoaXNPYmosIF9wcmlvcml0eSwgX2Rpc3BhdGNoT25jZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVTY2VuZUV2ZW50KHR5cGU6IHN0cmluZyB8IG51bWJlciwgY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciA9IG51bGwsIHRoaXNPYmo6IGFueSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB0aGlzLm1TY2VuZUNhbGxiYWNrLmNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzT2JqID0gdGhpcy5tU2NlbmVDYWxsYmFjay50aGlzT2JqXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zY2VuZUV2ZW50cy5yZW1vdmVMaXN0ZW5lcihjYWxsYmFjaywgdGhpc09iaiwgdHlwZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRNb2RlRXZlbnQodHlwZTogc3RyaW5nIHwgbnVtYmVyLCBjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyID0gbnVsbCwgdGhpc09iajogYW55ID0gbnVsbCwgX3ByaW9yaXR5OiBudW1iZXIgPSAwLCBfZGlzcGF0Y2hPbmNlOiBib29sZWFuID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB0aGlzLm1Nb2RlQ2FsbGJhY2suY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIHRoaXNPYmogPSB0aGlzLm1Nb2RlQ2FsbGJhY2sudGhpc09ialxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubW9kZUV2ZW50cy5hZGRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgdGhpc09iailcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVNb2RlRXZlbnQodHlwZTogc3RyaW5nIHwgbnVtYmVyLCBjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyID0gbnVsbCwgdGhpc09iajogYW55ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHRoaXMubU1vZGVDYWxsYmFjay5jYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgdGhpc09iaiA9IHRoaXMubU1vZGVDYWxsYmFjay50aGlzT2JqXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tb2RlRXZlbnRzLnJlbW92ZUxpc3RlbmVyKGNhbGxiYWNrLCB0aGlzT2JqLCB0eXBlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFJlbW92ZUFsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXR3b3JrRXZuZXRzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtFdm5ldHMucmVtb3ZlQWxsTGlzdGVuZXIoKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zY2VuZUV2ZW50cyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZUV2ZW50cy5yZW1vdmVBbGxMaXN0ZW5lcigpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVpRXZlbnRzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVpRXZlbnRzLnJlbW92ZUFsbExpc3RlbmVyKClcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZUV2ZW50cyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlRXZlbnRzLnJlbW92ZUFsbExpc3RlbmVyKClcclxuICAgICAgICAgICAgdGhpcy5vdGhlckV2ZW50cy5mb3JFYWNoKGVsZW1lbnQgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5EZXRhY2hMaXN0ZW5lcigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLm90aGVyRXZlbnRzLnNwbGljZSgwLCB0aGlzLm90aGVyRXZlbnRzLmxlbmd0aClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEV2ZW50TGlzdGVuZXJEYXRhXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbUV2ZW50TGlzdGVuZXJEYXRhOiBBcnJheTxFdmVudExpc3RlbmVyRGF0YT4gPSBuZXcgQXJyYXk8RXZlbnRMaXN0ZW5lckRhdGE+KClcclxuICAgICAgICBwdWJsaWMgc3RhdGljIENyZWF0ZUV2ZW50TGlzdGVuZXJEYXRhKGRpczogRGlzcGF0Y2hFdmVudE5vZGUsIGNhbGxiYWNrOiBFdmVudENhbGxiYWNrTGlzdGVuZXIsIHRoaXNPYmo6IGFueSwgdHlwZTogc3RyaW5nLFxyXG4gICAgICAgICAgICBfcHJpb3JpdHk6IG51bWJlciA9IDAsIF9kaXNwYXRjaE9uY2U6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lckRhdGEgPSBudWxsXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1FdmVudExpc3RlbmVyRGF0YS5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IHRoaXMubUV2ZW50TGlzdGVuZXJEYXRhLnBvcCgpXHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5kaXMgPSBkaXNcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGxiYWNrID0gY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLnRoaXNPYmogPSB0aGlzT2JqXHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci50eXBlID0gdHlwZVxyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gbmV3IEV2ZW50TGlzdGVuZXJEYXRhKGRpcywgY2FsbGJhY2ssIHRoaXNPYmosIHR5cGUsIF9wcmlvcml0eSwgX2Rpc3BhdGNoT25jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgUmV0dXJuRXZlbnRMaXN0ZW5lckRhdGEobGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJEYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5kaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lci50eXBlLCBsaXN0ZW5lci5jYWxsYmFjaywgbGlzdGVuZXIudGhpc09iailcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmRpcyA9IG51bGxcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGxiYWNrID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIudGhpc09iaiA9IG51bGxcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLnR5cGUgPSBudWxsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1FdmVudExpc3RlbmVyRGF0YS5wdXNoKGxpc3RlbmVyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlzOiBEaXNwYXRjaEV2ZW50Tm9kZVxyXG4gICAgICAgIHB1YmxpYyBjYWxsYmFjazogRXZlbnRDYWxsYmFja0xpc3RlbmVyXHJcbiAgICAgICAgcHVibGljIHRoaXNPYmo6IGFueVxyXG4gICAgICAgIHB1YmxpYyB0eXBlOiBzdHJpbmdcclxuICAgICAgICBwdWJsaWMgcHJpb3JpdHk6IG51bWJlclxyXG4gICAgICAgIHB1YmxpYyBkaXNwYXRjaE9uY2U6IGJvb2xlYW4gPSBmYWxzZVxyXG5cclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoZGlzOiBEaXNwYXRjaEV2ZW50Tm9kZSwgY2FsbGJhY2s6IEV2ZW50Q2FsbGJhY2tMaXN0ZW5lciwgdGhpc09iajogYW55LCB0eXBlOiBzdHJpbmdcclxuICAgICAgICAgICAgLCBfcHJpb3JpdHk6IG51bWJlciA9IDAsIF9kaXNwYXRjaE9uY2U6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzID0gZGlzXHJcbiAgICAgICAgICAgIHRoaXMudGhpc09iaiA9IHRoaXNPYmpcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZVxyXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcclxuICAgICAgICAgICAgdGhpcy5wcmlvcml0eSA9IF9wcmlvcml0eVxyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoT25jZSA9IF9kaXNwYXRjaE9uY2VcclxuICAgICAgICAgICAgLy8gdGhpcy5BdHRhY2hMaXN0ZW5lcigpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQXR0YWNoTGlzdGVuZXIoKTogYm9vbGVhblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzLmhhc0V2ZW50TGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLmNhbGxiYWNrLCB0aGlzLnRoaXNPYmopKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRldGFjaExpc3RlbmVyKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGlzLmFkZEV2ZW50TGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLmNhbGxiYWNrLCB0aGlzLnRoaXNPYmosIHRoaXMucHJpb3JpdHksIHRoaXMuZGlzcGF0Y2hPbmNlKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERldGFjaExpc3RlbmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV2ZW50TGlzdGVuZXJEYXRhLlJldHVybkV2ZW50TGlzdGVuZXJEYXRhKHRoaXMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibW9kdWxlIFlLXHJcbntcclxuICAgIGV4cG9ydCBjbGFzcyBOZXRNZ3IgZXh0ZW5kcyBEaXNwYXRjaEV2ZW50Tm9kZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBodHRwVXJsOiBzdHJpbmcgPSBcImh0dHA6Ly8zOS4xMDcuODQuODc6OTEwMC8/XCJcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBtSW5zdGFuY2U6IE5ldE1ncjtcclxuICAgICAgICBwcml2YXRlIG1UaW1lb3V0ID0gMTAvL+m7mOiupOWNgeenklxyXG4gICAgICAgIHByaXZhdGUgbUhlYXJ0VGltZW91dCA9IDEwXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXQgSW5zdGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubUluc3RhbmNlID09IG51bGwpbmV3IE5ldE1ncigpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1JbnN0YW5jZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpcDogc3RyaW5nID0gJ3dzOi8vMzkuMTA3Ljg0Ljg3OjkwMjMnO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICAgICAgaWYoTmV0TWdyLm1JbnN0YW5jZSA9PSBudWxsKSBOZXRNZ3IubUluc3RhbmNlID0gdGhpc1xyXG4gICAgICAgICAgICBUaW1lRGVsYXkuSW5zdGFuY2UuQWRkKDEsIDAsIHRoaXMuQ2hlY2tTZW5kVGltZU91dCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgTGF5YS5Tb2NrZXQobnVsbCwgbnVsbCwgTGF5YS5CeXRlKVxyXG4gICAgICAgICAgICB0aGlzLnNvY2tldC5vbihMYXlhLkV2ZW50Lk9QRU4sIHRoaXMsIHRoaXMub25vcGVuKTtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oTGF5YS5FdmVudC5DTE9TRSwgdGhpcywgdGhpcy5vbmNsb3NlKTtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oTGF5YS5FdmVudC5NRVNTQUdFLCB0aGlzLCB0aGlzLm9ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ja2V0Lm9uKExheWEuRXZlbnQuRVJST1IsIHRoaXMsIHRoaXMub25lcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvbkRlc3Ryb3koKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGltZURlbGF5Lkluc3RhbmNlLlJlbW92ZSh0aGlzLkNoZWNrU2VuZFRpbWVPdXQsIHRoaXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgQ2hlY2tTZW5kVGltZU91dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tU2VuZFF1ZXVlLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBhcnJheTogQXJyYXk8YW55PiA9IG5ldyBBcnJheTxhbnk+KClcclxuICAgICAgICAgICAgICAgIHRoaXMubVNlbmRRdWV1ZS5mb3JFYWNoKGVsZW1lbnQgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGVsZW1lbnQuc2VuZFRpbWUgPiB0aGlzLm1UaW1lb3V0ICogMTAwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goZWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBhcnJheS5mb3JFYWNoKGVsZW1lbnQgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm1TZW5kUXVldWUuaW5kZXhPZihlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubVNlbmRRdWV1ZS5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXNnVGltZU91dChlbGVtZW50LmhlYWQpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFkZFByb3RvKHBiTmFtZTogc3RyaW5nLCBwcm90b05hbWVzOiBBcnJheTxzdHJpbmc+KTogdm9pZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJvb3RzID0gcHJvdG9idWYucm9vdHNbXCJkZWZhdWx0XCJdW3BiTmFtZV1cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHByb3RvTmFtZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBwcm90b05hbWUgPSBwcm90b05hbWVzW2tleV1cclxuICAgICAgICAgICAgICAgIGxldCBfY2xhc3MgPSByb290c1twcm90b05hbWVdXHJcbiAgICAgICAgICAgICAgICBQcm90b01hcC5BZGQocHJvdG9OYW1lLCBfY2xhc3MpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc29ja2V0OiBMYXlhLlNvY2tldCA9IG51bGxcclxuICAgICAgICBwdWJsaWMgY29ubmVjdCh3c3VybCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3c3VybCA9IHdzdXJsID09IG51bGwgPyB0aGlzLmlwIDogd3N1cmxcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29ja2V0LmNvbm5lY3RlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbm9wZW4obnVsbClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3RCeVVybCh3c3VybClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsYXN0QWN0aXZpdHlUaW1lXHJcbiAgICAgICAgcHJpdmF0ZSBoZWFydGJlYXRJbnRlcnZhbFRpbWVJZFxyXG4gICAgICAgIHByaXZhdGUgY2hlY2tIZWFydGJlYXRUaW1lT3V0SW50ZXJ2YWxUaW1lSWRcclxuICAgICAgICBwcml2YXRlIG9ub3BlbihldjogRXZlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIumTvuaOpeacjeWKoeWZqOaIkOWKn1wiKVxyXG4gICAgICAgICAgICBUaW1lRGVsYXkuSW5zdGFuY2UuUmVtb3ZlKHRoaXMuc2VuZEhlYXJ0YmVhdCwgdGhpcylcclxuICAgICAgICAgICAgVGltZURlbGF5Lkluc3RhbmNlLlJlbW92ZSh0aGlzLmNoZWNrSGVhcnRiZWF0LCB0aGlzKVxyXG4gICAgICAgICAgICBUaW1lRGVsYXkuSW5zdGFuY2UuQWRkKDMsIDAsIHRoaXMuc2VuZEhlYXJ0YmVhdCwgdGhpcylcclxuICAgICAgICAgICAgVGltZURlbGF5Lkluc3RhbmNlLkFkZCgzLCAwLCB0aGlzLmNoZWNrSGVhcnRiZWF0LCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RBY3Rpdml0eVRpbWUgPSBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIHRoaXMuRGlzcGF0Y2hFdmVudEJ5VHlwZShOZXRNZ3JFdmVudERlZi5vbm9wZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGlzQ29ubmVjdCgpOiBib29sZWFuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb2NrZXQgIT0gbnVsbCAmJiB0aGlzLnNvY2tldC5jb25uZWN0ZWRcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZSBkaXNDb25uZWN0KG1zZ1R5cGUsIG1zZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1TZW5kUXVldWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubVNlbmRRdWV1ZS5zcGxpY2UoMCwgdGhpcy5tU2VuZFF1ZXVlLmxlbmd0aClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0Nvbm5lY3QoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuY2xlYW5Tb2NrZXQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFRpbWVEZWxheS5JbnN0YW5jZS5SZW1vdmUodGhpcy5zZW5kSGVhcnRiZWF0LCB0aGlzKVxyXG4gICAgICAgICAgICBUaW1lRGVsYXkuSW5zdGFuY2UuUmVtb3ZlKHRoaXMuY2hlY2tIZWFydGJlYXQsIHRoaXMpXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0geyB0eXBlOiBtc2dUeXBlLCBtc2c6IG1zZyB9XHJcbiAgICAgICAgICAgIHRoaXMuRGlzcGF0Y2hFdmVudEJ5VHlwZShOZXRNZ3JFdmVudERlZi5kaXNDb25uZWN0LCBkYXRhKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbmVycm9yKGV2OiBFdmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5LiO5pyN5Yqh5Zmo6L+e5o6l5aSx6LSlXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGlzQ29ubmVjdChOZXRNZ3JFdmVudERlZi5vbmVycm9yLCBcIuS4juacjeWKoeWZqOi/nuaOpeWksei0pVwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbmNsb3NlKGV2OiBFdmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5LiO5pyN5Yqh5Zmo6L+e5o6l5pat5byAXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGlzQ29ubmVjdChOZXRNZ3JFdmVudERlZi5vbmNsb3NlLCBcIuS4juacjeWKoeWZqOi/nuaOpeaWreW8gFwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbm1lc3NhZ2UoZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkOiBQYWNrQmFzZVxyXG4gICAgICAgICAgICAvL3RyeSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGVhZCA9IFByb3RvTWFwLlVuUGFja0hlYWQoZGF0YSlcclxuICAgICAgICAgICAgICAgIGlmIChoZWFkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0QWN0aXZpdHlUaW1lID0gRGF0ZS5ub3coKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZC5jbWQgIT0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdHJpYnV0ZU1zZyhoZWFkKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi5pS25Yiw5b+D6Lez5YyFXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLljY/orq7op6PmnpDlpLHotKVcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvL2NhdGNoIChlcnJvcikgXHJcbiAgICAgICAgICAgIC8vIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLljY/orq7op6PmnpDlpLHotKVcIilcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuZGlzQ29ubmVjdChcIm9uZXJyb3JcIixcIuino+aekOa2iOaBr+Wksei0pVwiKVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG1Nc2dJZCA9IDBcclxuICAgICAgICBwcml2YXRlIGdldCBNc2dpZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tTXNnSWQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbVNlbmRRdWV1ZTogQXJyYXk8YW55PiA9IG5ldyBBcnJheSgpXHJcbiAgICAgICAgcHJpdmF0ZSBzZW5kSGVhcnRiZWF0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29ubmVjdCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi5Y+R6YCB5LiA5qyh5b+D6LezXCIgKyBEYXRlLm5vdygpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5TZW5kKDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2hlY2tIZWFydGJlYXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RBY3Rpdml0eVRpbWUgPiAxMCAqIDEwMDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzQ29ubmVjdChOZXRNZ3JFdmVudERlZi5IZWFydGJlYXRUaW1lT3V0LCBcIuS4juacjeWKoeWZqOi/nuaOpei2heaXtlwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG1zZ1RpbWVPdXQoaGVhZDogUGFja0Jhc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaGVhZC5jbWQgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNDb25uZWN0KE5ldE1nckV2ZW50RGVmLkhlYXJ0YmVhdFRpbWVPdXQsIFwi5LiO5pyN5Yqh5Zmo6L+e5o6l6LaF5pe2XCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXYgPSBuZXcgUmVzcG9uc2VNZXNzYWdlRXZlbnQoaGVhZC5jbWQudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIGhlYWQuZXJyb3Jjb2RlID0gLTFcclxuICAgICAgICAgICAgICAgIGV2LlNldERhdGEoaGVhZCwgbnVsbClcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi5raI5oGv6L+U5Zue6LaF5pe2aWQ9XCIgKyBoZWFkLmNtZClcclxuICAgICAgICAgICAgICAgIHRoaXMuRGlzcGF0Y2hFdmVudChldilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNlbmRHZXQodXJsLCBjYWxsYmFjazogRnVuYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVybCA9IHRoaXMuaHR0cFVybCArIHVybFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1cmwpXHJcbiAgICAgICAgICAgIGxldCBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IGxheWEubmV0Lkh0dHBSZXF1ZXN0KClcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmNlKGxheWEuZXZlbnRzLkV2ZW50LkNPTVBMRVRFLCB0aGlzLCAoZTogbGF5YS5ldmVudHMuRXZlbnQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXNwb25lID0gcmVxdWVzdC5kYXRhXHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IG51bGxcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25lICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLkludm9rZShkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmNlKGxheWEuZXZlbnRzLkV2ZW50LkVSUk9SLCB0aGlzLCAoZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suSW52b2tlKG51bGwpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXF1ZXN0LnNlbmQodXJsLCBudWxsLCBcImdldFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZW5kKGlkOiBudW1iZXIsIGRhdGE6IGFueSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgaGVhZCA9IG5ldyBQYWNrQmFzZSgpXHJcbiAgICAgICAgICAgIGhlYWQuY21kID0gaWRcclxuICAgICAgICAgICAgaGVhZC5lcnJvcmNvZGUgPSAwXHJcbiAgICAgICAgICAgIGhlYWQubXNnaWQgPSB0aGlzLk1zZ2lkXHJcbiAgICAgICAgICAgIGxldCBzZW5kRGF0YSA9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZDogaGVhZCxcclxuICAgICAgICAgICAgICAgICAgICBzZW5kVGltZTogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDb25uZWN0KCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBidWZmZXI6IEFycmF5QnVmZmVyID0gUHJvdG9NYXAuUGFjayhoZWFkLCBkYXRhKVxyXG4gICAgICAgICAgICAgICAgaWYgKGlkICE9IDEpIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+R6YCB5raI5oGv57uZ5pyN5Yqh5Zmo44CLXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaGVhZClcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubVNlbmRRdWV1ZS5wdXNoKHNlbmREYXRhKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuc2VuZChidWZmZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi572R57uc5pat5byA5peg5rOV5Y+R6YCB5raI5oGvXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGRpc3RyaWJ1dGVNc2coaGVhZDogUGFja0Jhc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgbXNnID0gUHJvdG9NYXAuVW5QYWNrKGhlYWQpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pS25Yiw5pyN5Yqh6L+U5Zue55qE5raI5oGv5L+h5oGv5aS077yaXCIpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhlYWQpXHJcbiAgICAgICAgICAgIGlmIChoZWFkLmVycm9yY29kZSAhPSBudWxsICYmIGhlYWQuZXJyb3Jjb2RlICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIuacjeWKoeWZqOi/lOWbnumUmeivr+eggSAg5raI5oGvaWTvvJpcIiArIGhlYWQuY21kICsgXCIvZXJyb3Jjb2RlPVwiICsgaGVhZC5lcnJvcmNvZGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhlYWQgPT0gbnVsbCB8fCBoZWFkLmNtZCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLmnI3liqHlmajov5Tlm57ml6DmlYjnmoRjbWRpZFwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tU2VuZFF1ZXVlLmZpbmRJbmRleCgob2JqLCBpbmRleCwgYW55KSA9PiBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmhlYWQubXNnaWQgPT0gaGVhZC5tc2dpZCAmJiBvYmouaGVhZC5jbWQgPT0gaGVhZC5jbWRcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tU2VuZFF1ZXVlLnNwbGljZShpbmRleCwgMSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBldiA9IG5ldyBSZXNwb25zZU1lc3NhZ2VFdmVudChoZWFkLmNtZC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgZXYuU2V0RGF0YShoZWFkLCBtc2cpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkRpc3BhdGNoRXZlbnQoZXYpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgZXhwb3J0IGNsYXNzIE5ldE1nckV2ZW50RGVmXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkaXNDb25uZWN0OiBzdHJpbmcgPSBcImRpc0Nvbm5lY3RcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIG9uZXJyb3I6IHN0cmluZyA9IFwib25lcnJvclwiXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvbmNsb3NlOiBzdHJpbmcgPSBcIm9uY2xvc2VcIlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb25vcGVuOiBzdHJpbmcgPSBcIm9ub3BlblwiXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIZWFydGJlYXRUaW1lT3V0OiBzdHJpbmcgPSBcIkhlYXJ0YmVhdFRpbWVPdXRcIlxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB0eXBlIEh0dHBSZXNwRGF0YSA9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtc2c6IHN0cmluZyxcclxuICAgICAgICAgICAgZXJyb3Jjb2RlOiBudW1iZXIsXHJcbiAgICAgICAgICAgIGRhdGE6IGFueSxcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbn0iLCJtb2R1bGUgWUtcclxue1xyXG4gICAgaW1wb3J0IEhhbmRsZXIgPSBMYXlhLkhhbmRsZXI7XHJcbiAgICBjbGFzcyBSZXNJbmZvXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHVybDogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyB0eXBlOiBzdHJpbmdcclxuICAgICAgICBwdWJsaWMgaXNLZWVwTWVtb3J5ID0gZmFsc2VcclxuICAgICAgICBwdWJsaWMgaXNGR1VJUGFjayA9IGZhbHNlXHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXQgZnVsbFVybCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZHVUlQYWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cmwucmVwbGFjZShcIi5cIiArIGZhaXJ5Z3VpLlVJQ29uZmlnLnBhY2thZ2VGaWxlRXh0ZW5zaW9uLCBcIlwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVybFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0eXBlIHJlc0RpY1R5cGUgPSB7IFtrZXk6IHN0cmluZ106IFJlc0luZm8gfVxyXG4gICAgZXhwb3J0IGNsYXNzIExvYWRHcnVvcEluZm9cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUHJvZ3Jlc3M6IG51bWJlciA9IDBcclxuICAgICAgICBwdWJsaWMgbmVlZExvYWQ6IEFycmF5PFJlc0luZm8+ID0gbmV3IEFycmF5PFJlc0luZm8+KClcclxuICAgICAgICBwdWJsaWMgYWRkKHVybDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGlzS2VlcE1lbW9yeSA9IGZhbHNlLCBpc0ZHVUlQYWNrID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm5lZWRMb2FkLmZpbmRJbmRleCgodmFsdWU6IFJlc0luZm8sIGluZGV4OiBudW1iZXIsIG9iajogQXJyYXk8UmVzSW5mbz4pID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS51cmwgPT0gdXJsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZm8gPSBuZXcgUmVzSW5mbygpXHJcbiAgICAgICAgICAgICAgICBpbmZvLmlzS2VlcE1lbW9yeSA9IGlzS2VlcE1lbW9yeVxyXG4gICAgICAgICAgICAgICAgaW5mby51cmwgPSB1cmxcclxuICAgICAgICAgICAgICAgIGluZm8udHlwZSA9IHR5cGVcclxuICAgICAgICAgICAgICAgIGluZm8uaXNGR1VJUGFjayA9IGlzRkdVSVBhY2tcclxuICAgICAgICAgICAgICAgIHRoaXMubmVlZExvYWQucHVzaChpbmZvKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb25Db21wbGV0aW9uKGNhbGxiYWNrOiBGdW5jdGlvbiwgdGhpc09ianM6IGFueSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluaXNoID0gbmV3IEZ1bmModGhpc09ianMsIGNhbGxiYWNrKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uSXRlbUNvbXBsZXRpb24oY2FsbGJhY2s6IEZ1bmN0aW9uLCB0aGlzT2JqczogYW55KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkSXRlbSA9IG5ldyBGdW5jKHRoaXNPYmpzLCBjYWxsYmFjaylcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhcnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzTWdyLkluc3RhbmNlLkxvYWRHcm91cCh0aGlzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgbG9hZEl0ZW06IEZ1bmNcclxuICAgICAgICBwdWJsaWMgZmluaXNoOiBGdW5jXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJlc01nciBleHRlbmRzIERpc3BhdGNoRXZlbnROb2RlXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgICAgICBpZihSZXNNZ3IubUluc3RhbmNlID09IG51bGwpIFJlc01nci5tSW5zdGFuY2UgPSB0aGlzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgbU9sZFJlczogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KClcclxuICAgICAgICBwcml2YXRlIHJlc0RpYzogTWFwPHN0cmluZywgUmVzSW5mbz4gPSBuZXcgTWFwPHN0cmluZywgUmVzSW5mbz4oKVxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIG1JbnN0YW5jZTogUmVzTWdyID0gbnVsbFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0IEluc3RhbmNlKCk6IFJlc01nclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubUluc3RhbmNlID09IG51bGwpbmV3IFJlc01ncigpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1JbnN0YW5jZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdldFJlcyh1cmwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGF5YS5sb2FkZXIuZ2V0UmVzKHVybClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMb2FkR3JvdXAobG9hZHM6IExvYWRHcnVvcEluZm8pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgbGV0IHVybHM6IEFycmF5PGFueT4gPSBuZXcgQXJyYXk8YW55PigpXHJcbiAgICAgICAgICAgIGxvYWRzLm5lZWRMb2FkLmZvckVhY2goZWxlbWVudCA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1cmxzLnB1c2goeyB1cmw6IGVsZW1lbnQudXJsLCB0eXBlOiBlbGVtZW50LnR5cGUgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIExheWEubG9hZGVyLmxvYWQodXJscywgSGFuZGxlci5jcmVhdGUodGhpcywgKHN1Y2Nlc3M6IGJvb2xlYW4pID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2Fkcy5uZWVkTG9hZC5sZW5ndGg7IGluZGV4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IGxvYWRzLm5lZWRMb2FkW2luZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5pc0ZHVUlQYWNrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlyeWd1aS5VSVBhY2thZ2UuYWRkUGFja2FnZShpbmZvLmZ1bGxVcmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlc0RpYy5oYXMoaW5mby51cmwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc0RpYy5zZXQoaW5mby51cmwsIGluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRzLmZpbmlzaCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZHMuZmluaXNoLkludm9rZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLliqDovb3otYTmupDlpLHotKXvvJpcIilcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmxzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSwgSGFuZGxlci5jcmVhdGUodGhpcywgKHByb2dyZXNzOiBudW1iZXIpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2Fkcy5Qcm9ncmVzcyA9IHByb2dyZXNzICogMTAwXHJcbiAgICAgICAgICAgICAgICBpZiAobG9hZHMubG9hZEl0ZW0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2Fkcy5sb2FkSXRlbS5JbnZva2UoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOmHiuaUvui1hOa6kFxyXG4gICAgICAgICAqIEBwYXJhbSBmb3JjZWQg5piv5ZCm5by65Yi26YeK5pS+5omA5pyJXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHBvcChmb3JjZWQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChmb3JjZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubU9sZFJlcy5zcGxpY2UoMCwgdGhpcy5tT2xkUmVzLmxlbmd0aClcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc0RpYy5mb3JFYWNoKCh2OiBSZXNJbmZvLCBrZXk6IHN0cmluZykgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1PbGRSZXMucHVzaChrZXkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5tT2xkUmVzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLm1PbGRSZXMucG9wKClcclxuICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXNEaWMuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgIGlmIChpbmZvICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uaXNGR1VJUGFjaykgZmFpcnlndWkuVUlQYWNrYWdlLnJlbW92ZVBhY2thZ2UoaW5mby5mdWxsVXJsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzRGljLmRlbGV0ZShpbmZvLnVybClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIExheWEubG9hZGVyLmNsZWFyUmVzKHVybClcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmb3JjZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzRGljLmNsZWFyKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWOi+WFpeimgemHiuaUvueahOi1hOa6kFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwdXNoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzRGljLmZvckVhY2goKHY6IFJlc0luZm8sIGtleTogc3RyaW5nKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXYuaXNLZWVwTWVtb3J5KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubU9sZFJlcy5wdXNoKGtleSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19
